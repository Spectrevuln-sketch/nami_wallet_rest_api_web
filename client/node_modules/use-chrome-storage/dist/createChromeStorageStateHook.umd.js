!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e||self).useChromeStorage=t(e.react)}(this,function(e){return function(t,n,o){const r=[];return function(){const[s,c,u,f]=function(t,n,o){const[r]=e.useState(()=>"function"==typeof n?n():n),[s]=e.useState(o),[c,u]=e.useState(r),[f,a]=e.useState(!0),[i,h]=e.useState("");e.useEffect(()=>{((e,t,n)=>{const o=void 0===t?e:{[e]:t};return new Promise((t,r)=>{chrome.storage[n].get(o,n=>{const o=chrome.runtime.lastError;if(o)return r(o);t(n[e])})})})(t,r,s).then(e=>{u(e),a(!0),h("")}).catch(e=>{a(!1),h(e)})},[t,r,s]);const d=e.useCallback(e=>{const n="function"==typeof e?e(c):e;u(n),((e,t,n)=>new Promise((o,r)=>{chrome.storage[n].set({[e]:t},()=>{const e=chrome.runtime.lastError;e?r(e):o()})}))(t,n,s).then(()=>{a(!0),h("")}).catch(e=>{a(!1),h(e)})},[s,t,c]);return e.useEffect(()=>{const e=(e,n)=>{n===s&&t in e&&(u(e[t].newValue),a(!0),h(""))};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[t,s]),[c,d,f,i]}(t,n,o),a=e.useCallback(e=>{for(const t of r)t(e)},[]);return e.useEffect(()=>(r.push(c),()=>{r.splice(r.indexOf(c),1)}),[c]),[s,a,u,f]}}});
//# sourceMappingURL=createChromeStorageStateHook.umd.js.map
