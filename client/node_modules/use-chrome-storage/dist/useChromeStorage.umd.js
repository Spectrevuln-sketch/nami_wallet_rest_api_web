!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e||self).useChromeStorage=t(e.react)}(this,function(e){return function(t,o,n){const[r]=e.useState(()=>"function"==typeof o?o():o),[s]=e.useState(n),[c,u]=e.useState(r),[a,i]=e.useState(!0),[f,h]=e.useState("");e.useEffect(()=>{((e,t,o)=>{const n=void 0===t?e:{[e]:t};return new Promise((t,r)=>{chrome.storage[o].get(n,o=>{const n=chrome.runtime.lastError;if(n)return r(n);t(o[e])})})})(t,r,s).then(e=>{u(e),i(!0),h("")}).catch(e=>{i(!1),h(e)})},[t,r,s]);const d=e.useCallback(e=>{const o="function"==typeof e?e(c):e;u(o),((e,t,o)=>new Promise((n,r)=>{chrome.storage[o].set({[e]:t},()=>{const e=chrome.runtime.lastError;e?r(e):n()})}))(t,o,s).then(()=>{i(!0),h("")}).catch(e=>{i(!1),h(e)})},[s,t,c]);return e.useEffect(()=>{const e=(e,o)=>{o===s&&t in e&&(u(e[t].newValue),i(!0),h(""))};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[t,s]),[c,d,a,f]}});
//# sourceMappingURL=useChromeStorage.umd.js.map
